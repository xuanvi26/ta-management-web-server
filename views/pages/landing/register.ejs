<html>
    <%- include('../../partials/unauthenticated_navbar.ejs') %>
    <!-- A script that ensures that the user types selected are coherent -->
    <script>
        function uncheckProfAdminSysop() {
            document.getElementById("gridCheck3").checked = false;
            document.getElementById("gridCheck4").checked = false;
            document.getElementById("gridCheck5").checked = false;
        }
        function uncheckStudentTA() {
            document.getElementById("gridCheck1").checked = false;
            document.getElementById("gridCheck2").checked = false;
        }
        // A student cannot be a prof, admin, or sysop
        function clickStudent() {
            // if you check student (not uncheck), uncheck prof, admin, and sysop
            if (document.getElementById("gridCheck1").checked == true) {
                uncheckProfAdminSysop();
            }
            // if you uncheck student, then you cannot be a TA
            else {
                document.getElementById("gridCheck2").checked = false;
            }
        }
        // A TA is automatically also a student (and cannot be a professor (and admin 
        // and sysop) based on edstem post #289)
        function clickTa() {
            if (document.getElementById("gridCheck2").checked == true) {
                uncheckProfAdminSysop();
                document.getElementById("gridCheck1").checked = true;
            }
        }
        // A prof cannot be a student and ta
        function clickProf() {
            if (document.getElementById("gridCheck3").checked == true) {
                uncheckStudentTA();
            }
            // Unchecking prof unchecking prof, admin and sysop (they must be profs)
            else {
                uncheckProfAdminSysop();
            }
        }
        // An admin cannot be a student and ta and is always a prof
        function clickAdmin() {
            if (document.getElementById("gridCheck4").checked == true) {
                document.getElementById("gridCheck3").checked = true;
                uncheckStudentTA();
            }
        }
        // A sysop cannot be a student and ta and is always a prof and admin
        function clickSysop() {
            if (document.getElementById("gridCheck5").checked == true) {
                document.getElementById("gridCheck3").checked = true;
                document.getElementById("gridCheck4").checked = true;
                uncheckStudentTA();
            }
        }
    </script>
    <% var errors; %>
	<body>
        <div class="main-body-container">
            <h3 class="text-center">Welcome to TA-web-services!</h3>
            <h3 class="text-center">Register a new account</h3>
            <form 
                class="container single-page-form-container border border-primary rounded"
                action="/account/register"
                method="POST"
            >
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="inputFirstName3">First name</label>
                        <input
                            class="form-control"
                            id="inputFirstName3"
                            placeholder="First name (required)"
                            name="firstName"
                        />
                    </div>
                    <div class="form-group col-md-6">
                        <label for="inputLastName3">Last name</label>
                        <input
                            class="form-control"
                            id="inputLastName3"
                            placeholder="Last name (required)"
                            name="lastName"
                        />
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="inputMcGillId3">McGill ID</label>
    
                        <input
                            class="form-control"
                            id="inputMcGillId3"
                            placeholder="Mcgill ID (required, e.g.: 260293903)"
                            name="mcGillId"
                        />
                    </div>
                    <div class="form-group col-md-6">
                        <label for="inputEmail3">Email</label>
                        <input
                            type="email"
                            class="form-control"
                            id="inputEmail3"
                            placeholder="Email (required)"
                            name="email"
                        />
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="inputUsername3">Username</label>
                        <input
                            class="form-control"
                            id="inputUsername3"
                            placeholder="Username (required, min 2 alphanumeric characters)"
                            name="username"
                        />
                    </div>
                    <div class="form-group col-md-6">
                        <label for="inputPassword3">Password</label>
                        <input
                            type="password"
                            class="form-control"
                            id="inputPassword3"
                            placeholder="Password (required, min 3 characters)"
                            name="password"
                        />
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputCourses3">Registered Courses</label>
                    <input
                        class="form-control"
                        id="inputRegisteredCourses3"
                        placeholder="(E.g.: COMP 307,COMP 322,COMP 360)"
                        name="registeredCourses"
                    />
                </div>
                <fieldset class="form-group">
                    <legend class="col-form-label">User type (required)</legend>
                    <div class="form-check">
                        <input
                            class="form-check-input"
                            type="checkbox"
                            name="userTypes[]"
                            id="gridCheck1"
                            value="student"
                            onclick="clickStudent()"
                        />
                        <label class="form-check-label" for="gridRadios1">
                            Student
                        </label>
                    </div>
                    <div class="form-check">
                        <input
                            class="form-check-input"
                            type="checkbox"
                            name="userTypes[]"
                            id="gridCheck2"
                            value="ta"
                            onclick="clickTa()"
                        />
                        <label class="form-check-label" for="gridRadios1">
                            TA
                        </label>
                    </div>
                    <div class="form-check">
                        <input
                            class="form-check-input"
                            type="checkbox"
                            name="userTypes[]"
                            id="gridCheck3"
                            value="prof"
                            onclick="clickProf()"
                        />
                        <label class="form-check-label" for="gridRadios1">
                            Prof
                        </label>
                    </div>
                    <div class="form-check">
                        <input
                            class="form-check-input"
                            type="checkbox"
                            name="userTypes[]"
                            id="gridCheck4"
                            value="admin"
                            onclick="clickAdmin()"
                        />
                        <label class="form-check-label" for="gridRadios1">
                            Admin
                        </label>
                    </div>
                    <div class="form-check">
                        <input
                            class="form-check-input"
                            type="checkbox"
                            name="userTypes[]"
                            id="gridCheck5"
                            value="sysop"
                            onclick="clickSysop()"
                        />
                        <label class="form-check-label" for="gridRadios1">
                            System Operator
                        </label>
                    </div>
                </fieldset>
                <div class="form-group row">
                    <div class="col-sm-10">
                        <button type="submit" class="btn btn-primary">
                            Register
                        </button>
                    </div>
                </div>
                <% if(errors && errors[0]) { %>
                <div
                    class="alert alert-danger alert-dismissible fade show"
                    role="alert"
                >
                    <strong>Invalid Registration: </strong><%= errors[0] %>. Please
                    try again.
                    <button
                        type="button"
                        class="close"
                        data-dismiss="alert"
                        aria-label="Close"
                    >
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <% } %>
            </form>
        </div>
	</body>
</html>
